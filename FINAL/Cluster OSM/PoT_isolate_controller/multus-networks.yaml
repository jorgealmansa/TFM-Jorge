apiVersion: v1
kind: Namespace
metadata:
  name: scenario
---
apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: middle1-middle2-net
  namespace: scenario
spec:
  config: '{
    "cniVersion": "0.3.1",
    "type": "bridge",
    "bridge": "br-m1-m2",
    "ipam": {
      "type": "static",
      "addresses": []
    }
  }'
---
apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: middle2-egress-net
  namespace: scenario
spec:
  config: '{
    "cniVersion": "0.3.1",
    "type": "bridge",
    "bridge": "br-m2-e",
    "ipam": {
      "type": "static",
      "addresses": []
    }
  }'


---
apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: controller-net
  namespace: scenario
spec:
  config: '{
    "cniVersion": "0.3.1",
    "type": "bridge",
    "bridge": "br-ctrl",
    "ipam": {
      "type": "static",
      "addresses": []
    }
  }'

---
apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: kafka-net
  namespace: scenario
spec:
  config: '{
    "cniVersion": "0.3.1",
    "type": "bridge",
    "bridge": "br-kafka",
    "ipam": {
      "type": "static",
      "subnet": "10.2.1.0/24",
      "rangeStart": "10.2.1.3",
      "rangeEnd": "10.2.1.254",
      "gateway": "10.2.1.1",
      "routes": [{"dst": "0.0.0.0/0"}]
    }
  }'

---
apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: cluster-network
  namespace: scenario
spec:
  config: '{
    "cniVersion": "0.3.1",
    "type": "macvlan",
    "master": "ens3",
    "mode": "bridge",
    "ipam": {
      "type": "static",
      "addresses": []
    }
  }'

---
apiVersion: k8s.cni.cncf.io/v1
kind: NetworkAttachmentDefinition
metadata:
  name: cluster-controller
  namespace: scenario
spec:
  config: '{
    "cniVersion": "0.3.1",
    "type": "macvlan",
    "master": "ens3",
    "mode": "bridge",
    "ipam": {
      "type": "static",
      "addresses": []
    }
  }'